(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"4p3S":function(t,e,i){"use strict";i.d(e,"a",function(){return l});var o=i("CcnG"),n=i("RwQR"),s=i("Sy1n"),r=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,i,o){this.dataService=t,this.activeModal=e,this.modalService=i,this.translateService=o,this.items=[],this.title="Page with data table",this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new n.a("name","asc",1,10,0,0)}return t.prototype.ngOnInit=function(){this.getList()},t.prototype.modalOpen=function(t,e){var i=this;void 0===e&&(e=!1),this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1}),this.setModalInputs(t,e),this.modalRef.result.then(function(t){i.getList()},function(t){})},t.prototype.setModalInputs=function(t,e){void 0===e&&(e=!1);var i=void 0!==t&&!e;this.modalRef.componentInstance.modalTitle=i?this.getLangString("EDITING"):this.getLangString("ADD"),this.modalRef.componentInstance.itemId=t||0,this.modalRef.componentInstance.isItemCopy=e||!1,this.modalRef.componentInstance.isEditMode=i},t.prototype.deleteItemConfirm=function(t){var e=this;this.modalRef=this.modalService.open(s.c),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then(function(i){"accept"===i&&e.deleteItem(t)})},t.prototype.getLangString=function(t){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][t]||t},t.prototype.confirmAction=function(t){return this.modalRef=this.modalService.open(s.c),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=t,this.modalRef.result},t.prototype.blockSelected=function(){var t=this;0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe(function(e){t.clearSelected(),t.getList()},function(e){return t.showAlert(e.error||t.getLangString("ERROR"))}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))},t.prototype.deleteSelected=function(){var t=this;0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then(function(e){"accept"===e&&t.dataService.actionBatch(t.selectedIds,"delete").subscribe(function(e){t.clearSelected(),t.getList()},function(e){return t.showAlert(e.error||t.getLangString("ERROR"))})}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))},t.prototype.showAlert=function(t){this.modalRef=this.modalService.open(s.a),this.modalRef.componentInstance.modalContent=t,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"},t.prototype.deleteItem=function(t){var e=this;this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then(function(i){"accept"===i&&e.dataService.deleteItem(t).subscribe(function(t){e.getList()},function(t){t.error&&e.showAlert(t.error)})})},t.prototype.clearSelected=function(){this.table&&this.table.clearSelected()},t.prototype.actionRequest=function(t){switch(t[0]){case"edit":this.modalOpen(t[1]);break;case"copy":this.modalOpen(t[1],!0);break;case"delete":this.deleteItem(t[1]);break;case"changeQuery":this.getList()}},t.prototype.getList=function(){var t=this;this.loading=!0,this.dataService.getListPage(this.queryOptions).subscribe(function(e){t.items=e.items,t.collectionSize=e.total,t.loading=!1},function(e){t.items=[],t.collectionSize=0,e.error&&t.showAlert(e.error),t.loading=!1})},r([Object(o.ViewChild)("table"),a("design:type",Object)],t.prototype,"table",void 0),t}()},b1TM:function(t,e,i){"use strict";i.d(e,"a",function(){return c});var o=i("CcnG"),n=i("t/Na"),s=i("F/XL"),r=i("9Z1F"),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.http=t,this.headers=new n.c({"Content-Type":"application/json"}),this.requestUrl="",this.requestUrl="settings"}return t.prototype.setRequestUrl=function(t){this.requestUrl=t},t.prototype.getRequestUrl=function(){return this.requestUrl},t.prototype.getList=function(){return this.http.get(this.getRequestUrl()).pipe(Object(r.a)(this.handleError()))},t.prototype.clearSystemCache=function(){var t=this.getRequestUrl()+"/clear_system_cache";return this.http.post(t,{},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))},t.prototype.runActionPost=function(t){var e=this.getRequestUrl()+"/"+t;return this.http.post(e,{},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))},t.prototype.updateGroup=function(t,e){var i=this.getRequestUrl()+"/"+t;return this.http.put(i,e,{headers:this.headers}).pipe(Object(r.a)(this.handleError()))},t.prototype.getComposerPackagesList=function(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe(Object(r.a)(this.handleError()))},t.prototype.composerRequirePackage=function(t,e){var i=this.getRequestUrl()+"_composer_require_package";return this.http.post(i,{packageName:t,packageVersion:e},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))},t.prototype.handleError=function(t,e){return void 0===t&&(t="operation"),function(t){if(t.error)throw t.error;return Object(s.a)(e)}},t=a([Object(o.Injectable)(),l("design:paramtypes",[n.a])],t)}()},bbPC:function(t,e,i){"use strict";var o=i("CcnG"),n=i("gIcY"),s=i("lRln"),r=function(){function t(t,e,i,o,n,s,r,a){var l=this;this.id=t,this.title=e,this.fileName=i,this.extension=o,this.mimeType=n,this.ownerType=s,this.size=r,this.createdDate=a,this.toString=function(){return l.title+"."+l.extension}}return t.getFileData=function(t){var e=t.name.substr(0,t.name.lastIndexOf(".")),i=t.name.substr(t.name.lastIndexOf(".")+1),o=t.size;return new s.a(0,e,i,o)},t}();i.d(e,"a",function(){return c});var a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e,i,o,n,s){this.fb=t,this.dataService=e,this.systemNameService=i,this.activeModal=o,this.tooltipConfig=n,this.translateService=s,this.submitted=!1,this.loading=!1,this.formErrors={},this.validationMessages={},this.formFields={},this.files={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},n.placement="bottom",n.container="body",n.triggers="hover click"}return t.prototype.ngOnInit=function(){var t=this;this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then(function(){t.onAfterGetData()}):this.onAfterGetData(),this.onAfterInit()},t.prototype.onBeforeInit=function(){},t.prototype.onAfterInit=function(){},t.prototype.onAfterGetData=function(){},t.prototype.getSystemFieldName=function(){return"name"},t.prototype.getLangString=function(t){return this.translateService.store.translations[this.translateService.currentLang][t]||t},t.prototype.getModelData=function(){var t=this;return this.loading=!0,new Promise(function(e,i){t.dataService.getItem(t.itemId).subscribe(function(i){t.isItemCopy&&(i.id=null,i[t.getSystemFieldName()]=""),t.model=i,t.loading=!1,e(i)},function(e){t.errorMessage=e.error||"Error.",t.loading=!1,i(e)})})},t.prototype.buildForm=function(){var t=this,e=this.buildControls(this.formFields,"model");this.form=this.fb.group(e),this.form.valueChanges.subscribe(function(e){return t.onValueChanged("form","",e)})},t.prototype.buildControls=function(t,e,i){void 0===i&&(i="");var o={};for(var s in t)if(t.hasOwnProperty(s)){var r=t[s],a=r.dataKey?this[e][r.dataKey]:this[e];a[s]||(a[s]=r.value),o[s]=new n.FormControl({value:a[s]||"",disabled:r.disabled||!1},r.validators),this.formErrors[i+s]="",this.translateValidationMessages(i,s,r)}return o},t.prototype.translateValidationMessages=function(t,e,i){var o=this;this.validationMessages[t+e]={},i.fieldLabel&&i.validators.indexOf(n.Validators.required)>-1&&this.translateService.get(i.fieldLabel).subscribe(function(i){o.translateService.get("FIELD_REQUIRED",{name:i}).subscribe(function(i){o.validationMessages[t+e].required=i})})},t.prototype.getControl=function(t){return this.form.controls.name},t.prototype.onValueChanged=function(t,e,i){if(void 0===e&&(e=""),this[t]){var o=this[t].value;for(var n in o)if(o.hasOwnProperty(n)){this.formErrors[e+n]="";var s=this[t].get(n);if(s&&(s.dirty||this[e+"submitted"])&&!s.valid)for(var r in s.errors)this.validationMessages[e+n][r]?this.formErrors[e+n]+=this.validationMessages[e+n][r]+" ":this.formErrors[e+n]+="Error. "}}},t.prototype.displayToggle=function(t,e){e=e||"none"===t.style.display,t.style.display=e?"block":"none"},t.prototype.toggleAccordion=function(t,e,i){t.activeIds.indexOf(e)>-1&&i||t.toggle(e)},t.prototype.generateName=function(t){var e=t.title||"";t.name=this.systemNameService.generateName(e)},t.prototype.closeModal=function(){var t=this.itemId?"edit":"create";this.activeModal.close({reason:t,data:this.model})},t.prototype.close=function(t){t.preventDefault(),this.activeModal.dismiss("canceled")},t.prototype.getFormData=function(){var t=this,e={};return Object.keys(this.model).forEach(function(i){t.files[i]?e[i]=r.getFileData(t.files[i]):e[i]=t.model[i]}),e},t.prototype.fileChange=function(t,e){var i=t.target.files;i.length>0&&(this.model[e]=r.getFileData(i[0]),this.files[e]=i[0],this.form.controls[e].setValue(this.files[e].name))},t.prototype.fileClear=function(t,e){this.model[t]=null,this.form.controls[t].reset(null),e.files=null,e.value="",delete this.files[t]},t.prototype.onLocaleSwitch=function(){var t=this;if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach(function(e){t.model[e]=t.localePreviousValues[e]}),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach(function(e){t.localePreviousValues[e]=t.model[e]||"",t.model.translations[e]?t.model[e]=t.model.translations[e][t.localeCurrent]||"":t.model[e]=""})},t.prototype.saveTranslations=function(t){var e=this;t&&t.preventDefault(),this.localeFieldsAllowed.forEach(function(t){e.model[t]?(e.model.translations[t]||(e.model.translations[t]={}),e.model.translations[t][e.localeCurrent]=e.model[t]):e.model.translations[t]&&(e.model.translations[t][e.localeCurrent]&&delete e.model.translations[t][e.localeCurrent],0===Object.keys(e.model.translations[t]).length&&delete e.model.translations[t])}),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()},t.prototype.saveRequest=function(){return this.isEditMode?this.dataService.update(this.getFormData()):this.dataService.create(this.getFormData())},t.prototype.onSubmit=function(){this.submitted=!0,this.closeModal()},t.prototype.appendFormData=function(t){},t.prototype.saveFiles=function(t){var e=this;if(0!==Object.keys(this.files).length){var i=new FormData;for(var o in this.files)this.files.hasOwnProperty(o)&&this.files[o]instanceof File&&i.append(o,this.files[o],this.files[o].name);i.append("itemId",String(t)),this.appendFormData(i),this.dataService.postFormData(i).subscribe(function(){e.closeModal()},function(t){e.errorMessage=t.error||"Error.",e.submitted=!1,e.loading=!1})}else this.closeModal()},t.prototype.save=function(){var t=this;if(this.submitted=!0,!this.form.valid)return this.onValueChanged("form"),void(this.submitted=!1);this.loading=!0,this.saveRequest().subscribe(function(e){Object.keys(t.files).length>0?t.saveFiles(e._id||e.id):t.closeModal()},function(e){t.errorMessage=e.error||"Error.",t.loading=!1,t.submitted=!1})},a([Object(o.Input)(),l("design:type",String)],t.prototype,"modalTitle",void 0),a([Object(o.Input)(),l("design:type",Number)],t.prototype,"itemId",void 0),a([Object(o.Input)(),l("design:type",Boolean)],t.prototype,"isItemCopy",void 0),a([Object(o.Input)(),l("design:type",Boolean)],t.prototype,"isEditMode",void 0),t}()},bynA:function(t,e,i){"use strict";i.d(e,"b",function(){return o}),i.d(e,"a",function(){return n});var o=function(){return function(t,e,i){this.name=t,this.title=e,this.value=i}}(),n=function(){return function(t,e,i,o,n,s,r,a,l,c){this.id=t,this.email=e,this.fullName=i,this.roles=o,this.isActive=n,this.options=s,this.role=r,this.phone=a,this.password=l,this.confirmPassword=c}}()}}]);