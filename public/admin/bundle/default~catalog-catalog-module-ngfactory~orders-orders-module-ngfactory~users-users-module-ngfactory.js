(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4p3S":function(n,l,e){"use strict";e.d(l,"a",function(){return o});var t=e("RwQR"),i=e("Sy1n"),o=function(){function n(n,l,e,i){this.dataService=n,this.activeModal=l,this.modalService=e,this.translateService=i,this.items=[],this.title="Page with data table",this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new t.a("name","asc",1,10,0,0)}return n.prototype.ngOnInit=function(){this.getList()},n.prototype.modalOpen=function(n,l){var e=this;void 0===l&&(l=!1),this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1}),this.setModalInputs(n,l),this.modalRef.result.then(function(n){e.getList()},function(n){})},n.prototype.setModalInputs=function(n,l){void 0===l&&(l=!1);var e=void 0!==n&&!l;this.modalRef.componentInstance.modalTitle=this.getLangString(e?"EDITING":"ADD"),this.modalRef.componentInstance.itemId=n||0,this.modalRef.componentInstance.isItemCopy=l||!1,this.modalRef.componentInstance.isEditMode=e},n.prototype.deleteItemConfirm=function(n){var l=this;this.modalRef=this.modalService.open(i.c),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then(function(e){"accept"===e&&l.deleteItem(n)})},n.prototype.getLangString=function(n){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][n]||n},n.prototype.confirmAction=function(n){return this.modalRef=this.modalService.open(i.c),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=n,this.modalRef.result},n.prototype.blockSelected=function(){var n=this;0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe(function(l){n.clearSelected(),n.getList()},function(l){return n.showAlert(l.error||n.getLangString("ERROR"))}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))},n.prototype.deleteSelected=function(){var n=this;0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then(function(l){"accept"===l&&n.dataService.actionBatch(n.selectedIds,"delete").subscribe(function(l){n.clearSelected(),n.getList()},function(l){return n.showAlert(l.error||n.getLangString("ERROR"))})}):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))},n.prototype.showAlert=function(n){this.modalRef=this.modalService.open(i.a),this.modalRef.componentInstance.modalContent=n,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"},n.prototype.deleteItem=function(n){var l=this;this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then(function(e){"accept"===e&&l.dataService.deleteItem(n).subscribe(function(n){l.getList()},function(n){n.error&&l.showAlert(n.error)})})},n.prototype.clearSelected=function(){this.table&&this.table.clearSelected()},n.prototype.actionRequest=function(n){switch(n[0]){case"edit":this.modalOpen(n[1]);break;case"copy":this.modalOpen(n[1],!0);break;case"delete":this.deleteItem(n[1]);break;case"changeQuery":this.getList()}},n.prototype.getList=function(){var n=this;this.loading=!0,this.dataService.getListPage(this.queryOptions).subscribe(function(l){n.items=l.items,n.collectionSize=l.total,n.loading=!1},function(l){n.items=[],n.collectionSize=0,l.error&&n.showAlert(l.error),n.loading=!1})},n}()},"7SEM":function(n,l,e){"use strict";e.d(l,"a",function(){return p}),e.d(l,"b",function(){return C});var t=e("CcnG"),i=e("A7o+"),o=e("Ip0R"),u=e("4GxJ"),a=e("OKOO"),r=e("fMdm"),s=e("wgQU"),c=e("9AJC"),d=e("gIcY"),p=(e("hecf"),e("ZYCi"),t["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function f(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"th",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"button",[["class","btn btn-block btn-link"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectSortBy(n.context.$implicit.sortName)&&t),t},null,null)),(n()(),t["\u0275ted"](2,null,[" "," "])),t["\u0275pid"](131072,i.i,[i.j,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](4,0,null,null,0,"i",[],[[2,"icon-arrow-down",null],[2,"icon-arrow-up",null],[4,"visibility",null]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,2,0,t["\u0275unv"](l,2,0,t["\u0275nov"](l,3).transform(l.context.$implicit.title))),n(l,4,0,"asc"==e.queryOptions.sort_dir,"desc"==e.queryOptions.sort_dir,l.context.$implicit.sortName==e.queryOptions.sort_by?"visible":"hidden")})}function g(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,7,"thead",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,6,"tr",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,3,"th",[["class","text-left"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,2,"div",[["class","custom-control custom-checkbox custom-checkbox-single mr-4"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"input",[["class","custom-control-input"],["id","fieldSelectAll"],["type","checkbox"]],[[8,"checked",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.selectAll(e)&&t),t},null,null)),(n()(),t["\u0275eld"](5,0,null,null,0,"label",[["class","custom-control-label"],["for","fieldSelectAll"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](7,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,7,0,l.component.tableFields)},function(n,l){var e=l.component;n(l,3,0,0===e.items.length),n(l,4,0,e.getIsSelectedAll())})}function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,16777216,null,null,3,"button",[["class","btn btn-secondary btn-sm ml-2"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.action("copy",n.parent.parent.parent.context.$implicit.id)&&t),t},null,null)),t["\u0275did"](1,212992,null,0,u.Y,[t.ElementRef,t.Renderer2,t.Injector,t.ComponentFactoryResolver,t.ViewContainerRef,u.Z,t.NgZone,o.DOCUMENT],{ngbTooltip:[0,"ngbTooltip"]},null),t["\u0275pid"](131072,i.i,[i.j,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](3,0,null,null,0,"i",[["class","icon-stack"]],null,null,null,null,null)),(n()(),t["\u0275and"](0,null,null,0))],function(n,l){n(l,1,0,t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](l,1,0,t["\u0275nov"](l,2).transform("COPY")),""))},null)}function m(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,11,"div",[["class","relative"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,10,"div",[["class","show-on-hover-right no-wrap"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,16777216,null,null,3,"button",[["class","btn btn-secondary btn-sm ml-2"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.action("edit",n.parent.parent.context.$implicit.id)&&t),t},null,null)),t["\u0275did"](3,212992,null,0,u.Y,[t.ElementRef,t.Renderer2,t.Injector,t.ComponentFactoryResolver,t.ViewContainerRef,u.Z,t.NgZone,o.DOCUMENT],{ngbTooltip:[0,"ngbTooltip"]},null),t["\u0275pid"](131072,i.i,[i.j,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](5,0,null,null,0,"i",[["class","icon-pencil"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](7,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,16777216,null,null,3,"button",[["class","btn btn-secondary btn-sm ml-2"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.action("delete",n.parent.parent.context.$implicit.id)&&t),t},null,null)),t["\u0275did"](9,212992,null,0,u.Y,[t.ElementRef,t.Renderer2,t.Injector,t.ComponentFactoryResolver,t.ViewContainerRef,u.Z,t.NgZone,o.DOCUMENT],{ngbTooltip:[0,"ngbTooltip"]},null),t["\u0275pid"](131072,i.i,[i.j,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](11,0,null,null,0,"i",[["class","icon-cross"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,3,0,t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](l,3,0,t["\u0275nov"](l,4).transform("EDIT")),"")),n(l,7,0,e.isCloneAllowed),n(l,9,0,t["\u0275inlineInterpolate"](1,"",t["\u0275unv"](l,9,0,t["\u0275nov"](l,10).transform("DELETE")),""))},null)}function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"td",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](2,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](3,0,null,null,1,"app-output-field",[],null,[[null,"changeRequest"]],function(n,l,e){var t=!0;return"changeRequest"===l&&(t=!1!==n.component.optionUpdate(e)&&t),t},a.b,a.a)),t["\u0275did"](4,114688,null,0,r.a,[s.a],{object:[0,"object"],value:[1,"value"],outputType:[2,"outputType"],options:[3,"options"]},{changeRequest:"changeRequest"})],function(n,l){n(l,2,0,l.context.index==l.component.tableFields.length-1),n(l,4,0,l.parent.context.$implicit,l.parent.context.$implicit[l.context.$implicit.name],l.context.$implicit.outputType,l.context.$implicit.outputProperties)},null)}function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,6,"tr",[["class","show-on-hover-parent"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"td",[],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,2,"div",[["class","custom-control custom-checkbox custom-checkbox-single mr-4"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,0,"input",[["class","custom-control-input"],["type","checkbox"]],[[8,"id",0],[8,"checked",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.setSelected(e,n.context.$implicit.id)&&t),t},null,null)),(n()(),t["\u0275eld"](4,0,null,null,0,"label",[["class","custom-control-label"]],[[8,"htmlFor",0]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](6,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,6,0,l.component.tableFields)},function(n,l){var e=l.component;n(l,3,0,t["\u0275inlineInterpolate"](1,"fieldCheck",l.context.$implicit.id,""),e.getIsSelected(l.context.$implicit.id)),n(l,4,0,t["\u0275inlineInterpolate"](1,"fieldCheck",l.context.$implicit.id,""))})}function S(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"ngb-pagination",[["role","navigation"]],[[8,"className",0]],[[null,"pageChange"],[null,"pageSizeChange"]],function(n,l,e){var t=!0,i=n.component;return"pageChange"===l&&(t=!1!==(i.queryOptions.page=e)&&t),"pageSizeChange"===l&&(t=!1!==(i.queryOptions.limit=e)&&t),"pageChange"===l&&(t=!1!==i.pageChange()&&t),t},c.g,c.d)),t["\u0275did"](1,573440,null,0,u.A,[u.B],{boundaryLinks:[0,"boundaryLinks"],rotate:[1,"rotate"],collectionSize:[2,"collectionSize"],maxSize:[3,"maxSize"],page:[4,"page"],pageSize:[5,"pageSize"]},{pageChange:"pageChange"})],function(n,l){var e=l.component;n(l,1,0,!1,!0,e.collectionSize,7,e.queryOptions.page,e.queryOptions.limit)},function(n,l){n(l,0,0,"mb-0")})}function C(n){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{tableElement:0}),(n()(),t["\u0275eld"](1,0,null,null,37,"div",[["class","table-responsive"]],[[2,"loading",null]],null,null,null,null)),(n()(),t["\u0275eld"](2,0,[[1,0],["tableElement",1]],null,9,"table",[["class","table table-striped table-divided mb-0"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](4,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](5,0,null,null,6,"tbody",[],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](7,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275eld"](8,0,null,null,3,"tr",[["class","table-active"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,2,"td",[["class","text-center p-4"]],[[1,"colspan",0]],null,null,null,null)),(n()(),t["\u0275ted"](10,null,[" "," "])),t["\u0275pid"](131072,i.i,[i.j,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](12,0,null,null,26,"div",[["class","pt-3"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,22,"div",[["class","float-right"]],null,null,null,null,null)),(n()(),t["\u0275eld"](14,0,null,null,21,"select",[["class","form-control"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(n,l,e){var i=!0,o=n.component;return"change"===l&&(i=!1!==t["\u0275nov"](n,15).onChange(e.target.value)&&i),"blur"===l&&(i=!1!==t["\u0275nov"](n,15).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(o.queryOptions.limit=e)&&i),"change"===l&&(i=!1!==o.pageChange("limit")&&i),i},null,null)),t["\u0275did"](15,16384,null,0,d.SelectControlValueAccessor,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,d.NG_VALUE_ACCESSOR,function(n){return[n]},[d.SelectControlValueAccessor]),t["\u0275did"](17,671744,null,0,d.NgModel,[[8,null],[8,null],[8,null],[6,d.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,d.NgControl,null,[d.NgModel]),t["\u0275did"](19,16384,null,0,d.NgControlStatus,[[4,d.NgControl]],null,null),(n()(),t["\u0275eld"](20,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](21,147456,null,0,d.NgSelectOption,[t.ElementRef,t.Renderer2,[2,d.SelectControlValueAccessor]],{value:[0,"value"]},null),t["\u0275did"](22,147456,null,0,d["\u0275angular_packages_forms_forms_s"],[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](-1,null,["10"])),(n()(),t["\u0275eld"](24,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](25,147456,null,0,d.NgSelectOption,[t.ElementRef,t.Renderer2,[2,d.SelectControlValueAccessor]],{value:[0,"value"]},null),t["\u0275did"](26,147456,null,0,d["\u0275angular_packages_forms_forms_s"],[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](-1,null,["20"])),(n()(),t["\u0275eld"](28,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](29,147456,null,0,d.NgSelectOption,[t.ElementRef,t.Renderer2,[2,d.SelectControlValueAccessor]],{value:[0,"value"]},null),t["\u0275did"](30,147456,null,0,d["\u0275angular_packages_forms_forms_s"],[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](-1,null,["50"])),(n()(),t["\u0275eld"](32,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](33,147456,null,0,d.NgSelectOption,[t.ElementRef,t.Renderer2,[2,d.SelectControlValueAccessor]],{value:[0,"value"]},null),t["\u0275did"](34,147456,null,0,d["\u0275angular_packages_forms_forms_s"],[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](-1,null,["100"])),(n()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](37,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](38,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null))],function(n,l){var e=l.component;n(l,4,0,e.items.length>0),n(l,7,0,e.items),n(l,17,0,e.queryOptions.limit),n(l,21,0,10),n(l,22,0,10),n(l,25,0,20),n(l,26,0,20),n(l,29,0,50),n(l,30,0,50),n(l,33,0,100),n(l,34,0,100),n(l,37,0,e.collectionSize>e.queryOptions.limit)},function(n,l){var e=l.component;n(l,1,0,e.loading),n(l,8,0,e.items.length>0),n(l,9,0,e.tableFields.length+1),n(l,10,0,t["\u0275unv"](l,10,0,t["\u0275nov"](l,11).transform("EMPTY"))),n(l,12,0,0===e.items.length),n(l,14,0,t["\u0275nov"](l,19).ngClassUntouched,t["\u0275nov"](l,19).ngClassTouched,t["\u0275nov"](l,19).ngClassPristine,t["\u0275nov"](l,19).ngClassDirty,t["\u0275nov"](l,19).ngClassValid,t["\u0275nov"](l,19).ngClassInvalid,t["\u0275nov"](l,19).ngClassPending)})}},OKOO:function(n,l,e){"use strict";var t=e("CcnG"),i=e("4GxJ"),o=e("Ip0R"),u=function(){function n(){}return n.prototype.transform=function(n,l){var e;return e=n instanceof Date?n:this.createDate(n),new o.DatePipe("en-US").transform(e,l)},n.prototype.createDate=function(n){return"object"==typeof n&&n.date?new Date(n.date):null},n}(),a=e("wgQU"),r=function(){function n(n){this.appSettings=n}return n.prototype.transform=function(n){var l=this.appSettings.settings.rolesHierarchy,e=n,t=l.findIndex(function(l){return l.name===n});return t>-1&&(e=l[t].title),e},n}(),s=function(){function n(){}return n.prototype.transform=function(n){var l={ROLE_USER:"badge-primary",ROLE_ADMIN:"badge-warning",ROLE_SUPER_ADMIN:"badge-warning"},e="badge-primary";return l.hasOwnProperty(n)&&(e=l[n]),"badge "+e},n}();e("fMdm"),e.d(l,"a",function(){return c}),e.d(l,"b",function(){return S});var c=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function d(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","text-center"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"i",[["class","big text-success icon-circle-check"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,0,"i",[["class","big text-muted icon-circle-cross"]],[[8,"hidden",0]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,1,0,!e.value),n(l,2,0,e.value)})}function p(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,3)],null,function(n,l){var e=l.component,i=t["\u0275unv"](l,1,0,n(l,2,0,t["\u0275nov"](l.parent,0),e.value,"1.2-2","ru-RU"));n(l,1,0,i)})}function f(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,2)],null,function(n,l){var e=l.component,i=t["\u0275unv"](l,1,0,n(l,2,0,t["\u0275nov"](l.parent,1),e.value,e.options.format));n(l,1,0,i)})}function g(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,2)],null,function(n,l){var e=l.component,i=t["\u0275unv"](l,1,0,n(l,2,0,t["\u0275nov"](l.parent,2),e.value,e.options.format));n(l,1,0,i)})}function h(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,3,"span",[],[[8,"className",0]],null,null,null,null)),t["\u0275ppd"](2,1),(n()(),t["\u0275ted"](3,null,[" "," "])),t["\u0275ppd"](4,1)],null,function(n,l){var e=l.component,i=t["\u0275unv"](l,1,0,n(l,2,0,t["\u0275nov"](l.parent,3),e.value));n(l,1,0,i);var o=t["\u0275unv"](l,3,0,n(l,4,0,t["\u0275nov"](l.parent,4),e.value));n(l,3,0,o)})}function m(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"button",[["class","dropdown-item"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.optionUpdate("status",n.context.$implicit.name)&&t),t},null,null)),(n()(),t["\u0275ted"](2,null,[" "," "]))],null,function(n,l){n(l,1,0,l.context.$implicit.name===l.component.value),n(l,2,0,l.context.$implicit.name)})}function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,12,"div",[["class","text-center"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,11,"div",[["ngbDropdown",""]],[[2,"show",null]],[[null,"openChange"]],function(n,l,e){var i=!0;return"openChange"===l&&(i=!1!==n.component.optionUpdate("dropDownOpenChange",t["\u0275nov"](n,2).isOpen())&&i),i},null,null)),t["\u0275did"](2,212992,[["myDrop",4]],2,i.s,[t.ChangeDetectorRef,i.t,o.DOCUMENT,t.NgZone],{placement:[0,"placement"]},{openChange:"openChange"}),t["\u0275qud"](335544320,1,{_menu:0}),t["\u0275qud"](335544320,2,{_anchor:0}),(n()(),t["\u0275eld"](5,0,null,null,3,"button",[["aria-haspopup","true"],["class","btn btn-primary btn-xs shk-btn-status dropdown-toggle"],["ngbDropdownToggle",""]],[[4,"backgroundColor",null],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t["\u0275nov"](n,6).toggleOpen()&&i),i},null,null)),t["\u0275did"](6,16384,null,0,i.kb,[i.s,t.ElementRef],null,null),t["\u0275prd"](2048,[[2,4]],i.jb,null,[i.kb]),(n()(),t["\u0275ted"](8,null,[" "," "])),(n()(),t["\u0275eld"](9,0,null,null,3,"div",[["aria-labelledby","dropdownStatus"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],null,null,null,null)),t["\u0275did"](10,16384,[[1,4]],0,i.ib,[i.s,t.ElementRef,t.Renderer2],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](12,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,2,0,"bottom"),n(l,12,0,e.settingsStatuses)},function(n,l){var e=l.component;n(l,1,0,t["\u0275nov"](l,2).isOpen()),n(l,5,0,e.getStatusColor(e.value),t["\u0275nov"](l,6).dropdown.isOpen()),n(l,8,0,e.value),n(l,9,0,!0,t["\u0275nov"](l,10).dropdown.isOpen(),t["\u0275nov"](l,10).placement)})}function b(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.value)})}function S(n){return t["\u0275vid"](0,[t["\u0275pid"](0,o.DecimalPipe,[t.LOCALE_ID]),t["\u0275pid"](0,o.DatePipe,[t.LOCALE_ID]),t["\u0275pid"](0,u,[]),t["\u0275pid"](0,s,[]),t["\u0275pid"](0,r,[a.a]),(n()(),t["\u0275eld"](5,0,null,null,15,"div",[],null,null,null,null,null)),t["\u0275did"](6,16384,null,0,o.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,d)),t["\u0275did"](8,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](10,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](12,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](14,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](16,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](18,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](20,16384,null,0,o.NgSwitchDefault,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],null,null)],function(n,l){n(l,6,0,l.component.outputType),n(l,8,0,"boolean"),n(l,10,0,"number"),n(l,12,0,"date"),n(l,14,0,"dateObject"),n(l,16,0,"userRole"),n(l,18,0,"status")},null)}},bbPC:function(n,l,e){"use strict";var t=e("gIcY"),i=e("lRln"),o=function(){function n(n,l,e,t,i,o,u,a){var r=this;this.id=n,this.title=l,this.fileName=e,this.extension=t,this.mimeType=i,this.ownerType=o,this.size=u,this.createdDate=a,this.toString=function(){return r.title+"."+r.extension}}return n.getFileData=function(n){var l=n.name.substr(0,n.name.lastIndexOf(".")),e=n.name.substr(n.name.lastIndexOf(".")+1);return new i.a(0,l,e,n.size)},n}();e.d(l,"a",function(){return u});var u=function(){function n(n,l,e,t,i,o){this.fb=n,this.dataService=l,this.systemNameService=e,this.activeModal=t,this.tooltipConfig=i,this.translateService=o,this.submitted=!1,this.loading=!1,this.formErrors={},this.validationMessages={},this.formFields={},this.files={},i.placement="bottom",i.container="body",i.triggers="hover click"}return n.prototype.ngOnInit=function(){var n=this;this.onBeforeInit(),this.buildForm(),(this.isEditMode||this.isItemCopy)&&this.getModelData().then(function(){n.onAfterGetData()}),this.onAfterInit()},n.prototype.onBeforeInit=function(){},n.prototype.onAfterInit=function(){},n.prototype.onAfterGetData=function(){},n.prototype.getSystemFieldName=function(){return"name"},n.prototype.getLangString=function(n){return this.translateService.store.translations[this.translateService.currentLang][n]||n},n.prototype.getModelData=function(){var n=this;return this.loading=!0,new Promise(function(l,e){n.dataService.getItem(n.itemId).subscribe(function(e){n.isItemCopy&&(e.id=null,e[n.getSystemFieldName()]=""),n.model=e,n.loading=!1,l(e)},function(l){n.errorMessage=l.error||"Error.",n.loading=!1,e(l)})})},n.prototype.buildForm=function(){var n=this,l=this.buildControls(this.formFields,"model");this.form=this.fb.group(l),this.form.valueChanges.subscribe(function(l){return n.onValueChanged("form","",l)})},n.prototype.buildControls=function(n,l,e){void 0===e&&(e="");var i={};for(var o in n)if(n.hasOwnProperty(o)){var u=n[o],a=u.dataKey?this[l][u.dataKey]:this[l];a[o]||(a[o]=u.value),i[o]=new t.FormControl({value:a[o]||"",disabled:u.disabled||!1},u.validators),this.formErrors[e+o]="",this.translateValidationMessages(e,o,u)}return i},n.prototype.translateValidationMessages=function(n,l,e){var i=this;this.validationMessages[n+l]={},e.fieldLabel&&e.validators.indexOf(t.Validators.required)>-1&&this.translateService.get(e.fieldLabel).subscribe(function(e){i.translateService.get("FIELD_REQUIRED",{name:e}).subscribe(function(e){i.validationMessages[n+l].required=e})})},n.prototype.getControl=function(n){return this.form.controls.name},n.prototype.onValueChanged=function(n,l,e){if(void 0===l&&(l=""),this[n]){var t=this[n].value;for(var i in t)if(t.hasOwnProperty(i)){this.formErrors[l+i]="";var o=this[n].get(i);if(o&&(o.dirty||this[l+"submitted"])&&!o.valid)for(var u in o.errors)this.formErrors[l+i]+=this.validationMessages[l+i][u]?this.validationMessages[l+i][u]+" ":"Error. "}}},n.prototype.displayToggle=function(n,l){n.style.display=(l=l||"none"===n.style.display)?"block":"none"},n.prototype.toggleAccordion=function(n,l,e){n.activeIds.indexOf(l)>-1&&e||n.toggle(l)},n.prototype.generateName=function(n){n.name=this.systemNameService.generateName(n.title||"")},n.prototype.closeModal=function(){this.activeModal.close({reason:this.itemId?"edit":"create",data:this.model})},n.prototype.close=function(n){n.preventDefault(),this.activeModal.dismiss("canceled")},n.prototype.getFormData=function(){var n=this,l={};return Object.keys(this.model).forEach(function(e){l[e]=n.files[e]?o.getFileData(n.files[e]):n.model[e]}),l},n.prototype.fileChange=function(n,l){var e=n.target.files;e.length>0&&(this.model[l]=o.getFileData(e[0]),this.files[l]=e[0],this.form.controls[l].setValue(this.files[l].name))},n.prototype.fileClear=function(n,l){this.model[n]=null,this.form.controls[n].reset(null),l.files=null,l.value="",delete this.files[n]},n.prototype.saveRequest=function(){return this.isEditMode?this.dataService.update(this.getFormData()):this.dataService.create(this.getFormData())},n.prototype.onSubmit=function(){this.submitted=!0,this.closeModal()},n.prototype.appendFormData=function(n){},n.prototype.saveFiles=function(n){var l=this;if(0!==Object.keys(this.files).length){var e=new FormData;for(var t in this.files)this.files.hasOwnProperty(t)&&this.files[t]instanceof File&&e.append(t,this.files[t],this.files[t].name);e.append("itemId",String(n)),this.appendFormData(e),this.dataService.postFormData(e).subscribe(function(){l.closeModal()},function(n){l.errorMessage=n.error||"Error.",l.submitted=!1,l.loading=!1})}else this.closeModal()},n.prototype.save=function(){var n=this;if(this.submitted=!0,!this.form.valid)return this.onValueChanged("form"),void(this.submitted=!1);this.loading=!0,this.saveRequest().subscribe(function(l){Object.keys(n.files).length>0?n.saveFiles(l._id||l.id):n.closeModal()},function(l){n.errorMessage=l.error||"Error.",n.loading=!1,n.submitted=!1})},n}()}}]);